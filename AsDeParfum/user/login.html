<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="login.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

</head>

<body>
    <div id="header-container"></div>

    <div class="login-container">
        <a href="#" id="continue-shopping" class="back-link">&larr; Continue Shopping</a>
        <h1>Sign In</h1>

        <form id="login-form">
            <div class="input-group">
                <input type="email" id="email" placeholder="Email">
            </div>
            <div class="input-group">
                <input type="password" id="password" placeholder="Password">
            </div>
            <div class="options">
                <label>
                    <input type="checkbox">
                    Remember me
                </label>
                <a href="#">Forgot your password?</a>
            </div>
            <button id="signin" type="submit" class="btn">SIGN IN</button>

            <div class="social-login">
                <p>SIGN IN IN ONE CLICK</p>
                <button class="google">Google</button>
                <button class="facebook">Facebook</button>
            </div>
            <div id="signup">
                <p>Don't have an account? <a href="#">Sign up</a></p>
            </div>
        </form>
    </div>


    <div id="footer-container"></div>

    <script type="module" src="../script.js"></script>


     <script>
    // Remover mensagens de erro antigas antes de adicionar novas
    function clearErrors() {
        document.querySelectorAll('.error-message').forEach(el => el.remove());
    }

    // Exibir mensagem de erro
    function showError(inputId, message) {
        const inputElement = document.getElementById(inputId);
        
        // Evita duplicação de mensagens de erro
        if (inputElement.nextElementSibling?.classList.contains('error-message')) {
            return;
        }

        const errorMessage = document.createElement('div');
        errorMessage.classList.add('error-message');
        errorMessage.textContent = message;
        inputElement.insertAdjacentElement('afterend', errorMessage);
    }

    document.getElementById('login-form').addEventListener('submit', function (event) {
        event.preventDefault();

        clearErrors(); 

        let isValid = true;

        // Validar Email
        const email = document.getElementById('email').value.trim();
        const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
        if (!email || !emailRegex.test(email)) {
            showError('email', 'Please enter a valid email address');
            isValid = false;
        }

        // Validar Senha
        const password = document.getElementById('password').value.trim();
        if (!password) {
            showError('password', 'Password is required');
            isValid = false;
        }

        if (isValid) {
            alert('Login successful!');
            window.location.href = "../index.html"; 
        }
    });

    document.getElementById("signup")?.addEventListener("click", function (event) {
        event.preventDefault();
        window.location.href = "../user/signUp.html";
    });

    document.getElementById('continue-shopping')?.addEventListener('click', function (event) {
        event.preventDefault();
        window.location.href = '../index.html';
    });
</script>

</body>

</html>